Topic Learned: lsof command, File Descriptors, Closing Open Files

1️⃣ LSOF Command

Purpose: lsof (List Open Files) lists all open files and the processes using them.

Mandatory Option Example: lsof /home/admin/somefile

Example Output:

COMMAND  PID  USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME
bash     1012 admin   77w  REG  259,1        0 272875 /home/admin/somefile


Explanation: Shows that the file /home/admin/somefile is open by the bash process with PID 1012 and file descriptor 77 (in write mode).

2️⃣ File Descriptor (FD)

Definition: A file descriptor is a numeric identifier given by the OS to every open file or resource for a process.

Common FDs:

0 → stdin (keyboard)

1 → stdout (screen output)

2 → stderr (error output)

3+ → files opened by the process

Example: FD 77 corresponds to /home/admin/somefile opened by bash.

3️⃣ Closing an Open File

Purpose: To release a file descriptor without stopping the process.

Command in Bash:

exec 77>&-


Explanation:

exec → Bash built-in to manage file descriptors

77>&- → closes file descriptor 77

After executing, the file /home/admin/somefile is no longer open by the shell.